<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="favicon.ico" />
    <title>Pipeline View</title>
    <script>
      const view = (e) => (window.location.href = e);
    </script>
    <style>
      tr,
      td {
        cursor: pointer;
      }

      tr:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <button id="set-page-size" class="btn bg-violet">set page size 50</button>
    <select id="page-size-dropdown">
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
    </select>
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="mt-8 flow-root">
        <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
          <div
            class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"
          >
            <input
              id="search"
              name="search"
              class="block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-500 sm:text-sm sm:leading-6"
              placeholder="Search"
              type="search"
            />
            <div id="page-navigation"></div>
            <button id="previous-button">Previous</button>
            <button id="next-button">Next</button>
            <div id="Table"></div>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="index.js"></script>
    <script type="module" src="data.js"></script>
    <script type="module" src="table.js"></script>
    <script type="module">
      // Table client code here
      import { data } from "./data.js";
      import { createTable } from "./index.js";
      import { grayCol, dealNameCol, amountCol } from "./templates.js";

      const tableOptions = {
        sortable: false,
        cellOverrides: {
          id: (v, row) => grayCol(v, row),
          name: (v, row) => grayCol(v, row),
          contactName: (v, row) => dealNameCol(v, row),
          amount: (v, row) => amountCol(v, row),
          email: (v, row) => grayCol(v, row),
          address: (v, row) => grayCol(v, row),
        },
      };

      const tableData = data; // or generateObjects(1000);

      const dataTable = createTable(tableData, "Table", tableOptions);

      const pageSizeButton = document.getElementById("set-page-size");

      const dropdown = document.getElementById("page-size-dropdown");

      dropdown.addEventListener("change", function () {
        const selectedOption = dropdown.options[dropdown.selectedIndex].value;
        dataTable.setPageSize(parseInt(selectedOption));
      });

      const searchBox = document.getElementById("search");
      searchBox.onkeyup = dataTable.search;
    </script>
  </body>
</html>
