<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="favicon.ico" />
    <title>Pipeline View</title>
    <script>
      const view = (e) => (window.location.href = e);
    </script>
    <style>
      tr,
      td {
        cursor: pointer;
      }

      tr:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="sm:flex sm:items-center">
        <div class="sm:flex-auto">
          <h1 class="text-base font-semibold leading-6 text-gray-900">Users</h1>
        </div>
        <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
          <button
            type="button"
            class="block rounded-md bg-indigo-600 py-2 px-3 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
          >
            Add deal
          </button>
        </div>
      </div>
      <div class="mt-8 flow-root">
        <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
          <div
            class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"
          >
            <button class="btn" id="sort-id" data-value="id">id</button>
            <button class="btn" id="sort-name" data-value="contactName">
              name
            </button>
            <button class="btn" id="sort" data-value="amount">amount</button>
            <input
              id="search"
              name="search"
              class="block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-500 sm:text-sm sm:leading-6"
              placeholder="Search"
              type="search"
            />

            <div id="Table"></div>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="index.js"></script>
    <script type="module" src="index.js"></script>
    <script type="module" src="data.js"></script>
    <script type="module" src="table.js"></script>
    <script type="module">
      // Table client code here
      import { data } from "./data.js";
      import { createTable } from "./index.js";
      import { grayCol, dealNameCol, amountCol } from "./templates.js";

      const tableOptions = {
        sortable: false,
        cellOverrides: {
          id: (v, row) => grayCol(v, row),
          name: (v, row) => grayCol(v, row),
          contactName: (v, row) => dealNameCol(v, row),
          amount: (v, row) => amountCol(v, row),
          email: (v, row) => grayCol(v, row),
          address: (v, row) => grayCol(v, row),
        },
      };

      const tableData = data;
      // const tableData = generateObjects(100);

      const dataTable = createTable(tableData, "Table", tableOptions);

      const btn = document.getElementById("sort");
      btn.onclick = dataTable.sort;

      const btnName = document.getElementById("sort-name");
      btnName.onclick = dataTable.sort;

      const btnId = document.getElementById("sort-id");
      btnId.onclick = dataTable.sort;

      const searchBox = document.getElementById("search");
      searchBox.onkeyup = dataTable.search;

      const tableHeaders = document.querySelectorAll("th");

      tableHeaders.forEach((th) => {
        th.addEventListener("click", (e) => {
          console.log(e);
          dataTable.sort;
        });
      });
    </script>
  </body>
</html>
